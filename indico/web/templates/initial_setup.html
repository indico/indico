{% extends 'base.html' %}

{% block title %}{% trans %}Initial Setup{% endtrans %}{% endblock %}

{% block head %}
    {% assets 'indico_initial_setup' -%}
        <script src="{{ ASSET_URL }}"></script>
    {% endassets %}
    {% assets 'initial_setup_sass' -%}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}">
    {% endassets %}
{% endblock %}

{% block body %}

    <div class="init-setup-header">
        <img class="header-logo" src="{{ system_icon('logoIndicoWhite') }}">
        <div class="header-title">{% trans %}Hello there!{% endtrans %}</div>
        <div class="header-subtitle">{% trans %}Indico needs just a little bit more data from you...{% endtrans %}</div>
        <div id="languageSelector" class="toolbar language-selector">
            <form id="languageForm" method="POST" action="{{ url_for('misc.changeLang') }}">
                <input id="languageInputHidden" type="hidden" name="lang">
            </form>
            <a class="i-button icon-earth arrow" data-toggle="dropdown">{{ selectedLanguageName }}</a>
            <ul class="dropdown">
                {% for code, lang in language_options -%}
                    <li id="{{ code }}"><a>{{ lang }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="init-setup-body">

        <form class="init-setup-form" id="initial-setup-form" action="" method="POST">

            <div class="step-wrapper" id="step1">

                <div class="step-icon" id="tracker1">
                    <i class="icon-user"></i>
                </div>

                <div class="center step-container">

                    <h1 class="step-title">{% trans %}Administrator Account{% endtrans %}</h1>

                    <div class="step-description">
                        <div>{% trans %}Insert here all the basic informations needed to create your admin account.{% endtrans %}</div>
                        <div class="additional-information">{% trans %}You can update your account with all the secondary information (like your address or phone number) in a second moment by accessing the account management (My Profile, Account Details).{% endtrans %}</div>
                    </div>

                    <div class="fields-container">

                        <div>
                            <input id="name" type="text" name="name" data-error-tooltip="{% trans %}You must enter a name{% endtrans %}" value="{{ name_value }}" placeholder="{% trans %}First name{% endtrans %}" required>
                        </div>

                        <div>
                            <input id="surname" type="text" name="surname" data-error-tooltip="{% trans %}You must enter a surname{% endtrans %}" value="{{ surname_value }}" placeholder="{% trans %}Family name{% endtrans %}" required>
                        </div>

                        <div>
                            <input id="user_email" type="email" name="user_email" data-error-tooltip="{% trans %}You must enter your user e-mail address{% endtrans %}" data-error-tooltip2="{% trans %}You must enter a valid e-mail address{% endtrans %}" value="{{ user_email_value }}" placeholder="{% trans %}Email{% endtrans %}" required>
                        </div>

                        <div>
                            <input id="login" type="text" name="login" data-error-tooltip="{% trans %}You must enter a login{% endtrans %}" value="{{ login_value }}" placeholder="{% trans %}Login{% endtrans %}" required>
                        </div>

                        <div>
                            <input id="password" type="password" name="password" data-error-tooltip="{% trans %}You must define a password{% endtrans %}" value="" placeholder="{% trans %}Password{% endtrans %}" required>
                        </div>

                        <div>
                            <input id="password_confirm" type="password" name="password_confirm" data-error-tooltip="{% trans %}You must enter the same password twice{% endtrans %}" value="" placeholder="{% trans %}Confirm password{% endtrans %}" required>
                        </div>

                    </div>

                </div>

            </div>

            <div class="step-wrapper" id="step2">

                <div id="tracker1" class="step-icon">
                    <i class="icon-earth"></i>
                </div>

                <div class="center step-container">

                    <h1 class="step-title">{% trans %}Indico site default parameters{% endtrans %}</h1>

                    <div class="step-description">
                        <div>{% trans %}Configure here your server settings.{% endtrans %}</div>
                        <div class="additional-information">{% trans %}All the informations set here will also be used to fill your personal account information. To change these informations you can later head to Server Admin, General Settings (will change the server settings) or My Profile, Account Details (will change the account settings).{% endtrans %}</div>
                    </div>

                    <div class="fields-container">

                        <div>
                            <label for="lang">{% trans %}Language{% endtrans %}</label>
                            <select id="lang" name="lang" class="input-lang">
                                {% for code, lang in language_options -%}
                                    {% if selectedLanguage == code %}
                                        <option value="{{ code }}" selected>{{ lang }}</option>
                                    {% else %}
                                        <option value="{{ code }}">{{ lang }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>

                        <div>
                            <label for="timezone">{% trans %}Timezone{% endtrans %}</label>
                            <select id="timezone" name="timezone" class="input-timezone">{{ timezone_options | safe }}</select>
                        </div>

                        <div>
                            <input id="organisation" type="text" name="organisation" data-error-tooltip="{% trans %}You must enter the name of your organization{% endtrans %}" value="{{ organisation_value }}" placeholder="{% trans %}Organization{% endtrans %}" required>
                        </div>

                    </div>

                </div>

            </div>

            <div class="step-wrapper" id="step3">

                <div id="tracker1" class="step-icon">
                    <i class="icon-mail"></i>
                </div>

                <div class="center step-container">

                    <h1 class="step-title">{% trans %}Let us know you exist!{% endtrans %}</h1>

                    <div class="step-description">
                            <div>{% trans %}You can choose here to receive free notifications from the Indico developers team with updated informations to keep you up to date with your Indico administration (for example: security warnings, new versions released, ...){% endtrans %}</div>
                            <div class="additional-information">{% trans %}Please note that no private information will ever be sent to Indico@CERN and that you will be able to change the Instance Tracking settings anytime in the future (from Server Admin, General Settings).{% endtrans %}</div>
                    </div>

                    <div class="fields-container">

                        <div class="enable-line">
                            <input id="enable" type="checkbox" name="enable" value="1" {{ checked }}>
                            <div class="toggle-button">
                                <div class="toggle"></div>
                            </div>
                        </div>

                        <div>
                            <input id="it_email" type="email" name="it_email" data-error-tooltip="{% trans %}You must enter an e-mail for Instance Tracking{% endtrans %}" data-error-tooltip2="{% trans %}You must enter a valid e-mail for Instance Tracking{% endtrans %}" value="{{ it_email_value }}" placeholder="{% trans %}Contact email{% endtrans %}">
                        </div>

                    </div>

                </div>
                <div class="center">
                    <a id="submit-initial-setup" class="i-button blue-button big-button">
                        {% trans %}Finish{% endtrans %}
                    </a>
                </div>
            </div>

        </form>
    </div>

{% endblock %}
