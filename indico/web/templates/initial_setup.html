{% extends 'base.html' %}

{% from 'forms/_form.html' import form_header, form_row, form_rows, form_fieldset, form_footer %}

{% block title %}{% trans %}Initial Setup{% endtrans %}{% endblock %}

{% block head %}
    {% assets 'indico_initial_setup' -%}
        <script src="{{ ASSET_URL }}"></script>
    {% endassets %}
    {% assets 'initial_setup_sass' -%}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}">
    {% endassets %}
{% endblock %}

{% block body %}

    <div class="init-setup-header">
        <img class="header-logo" src="{{ system_icon('logoIndicoWhite') }}">
        <div class="header-title">{% trans %}Hello there!{% endtrans %}</div>
        <div class="header-subtitle">{% trans %}Indico needs just a little bit more data from you...{% endtrans %}</div>
        <div id="language-selector" class="toolbar language-selector">
            <form id="language-form" method="POST" action="{{ url_for('misc.changeLang') }}">
                <input id="language-hidden" type="hidden" name="lang">
            </form>
            <a class="i-button transparent-button icon-earth arrow" data-toggle="dropdown">{{ selected_lang_name }}</a>
            <ul class="dropdown">
                {% for code, lang in language_options -%}
                    <li id="{{ code }}"><a>{{ lang }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="init-setup-body">
        <form method="POST" action="" class="i-form init-setup-form" id="initial-setup-form">
            <div class="step-wrapper" id="step1">

                <div class="step-icon">
                    <i class="icon-user"></i>
                </div>

                <div class="center step-container">

                    <h1 class="step-title">{% trans %}Administrator Account{% endtrans %}</h1>

                    <div class="step-description">
                        <div>{% trans %}Insert here all basic information needed to create your account.{% endtrans %}</div>
                        <div class="additional-information">{% trans %}You can change any extra parameters (like your address or phone number) afterwards by accessing "Account Details" (from "My Profile").{% endtrans %}</div>
                    </div>

                    <div class="fields-container">
                        {{ form_rows(form, fields=('first_name', 'last_name', 'email', 'username', 'password', 'confirm_password'),
                                     placeholder=True) }}
                    </div>

                </div>
            </div>

            <div class="step-wrapper" id="step2">

                <div class="step-icon">
                    <i class="icon-earth"></i>
                </div>

                <div class="center step-container">

                    <h1 class="step-title">{% trans %}Site configuration{% endtrans %}</h1>

                    <div class="step-description">
                        <div>{% trans %}These are the default parameters for your Indico site.{% endtrans %}</div>
                        <div class="additional-information">{% trans %}Please note that this information will also be used for your own user profile. You can change it later.{% endtrans %}</div>
                    </div>

                    <div class="fields-container">
                        {{ form_rows(form, fields=('language', 'timezone', 'affiliation'), placeholder=True) }}
                    </div>
                </div>
            </div>

            <div class="step-wrapper" id="step3">

                <div class="step-icon">
                    <i class="icon-mail"></i>
                </div>

                <div class="center step-container">

                    <h1 class="step-title">{% trans %}Let us know you exist!{% endtrans %}</h1>

                    <div class="step-description">
                            <div>{% trans %}Be part of the ever growing Indico community! Choose to receive updated news on latest releases (2-3 times per year) as well as important security warnings.{% endtrans %}</div>
                            <div>
                                {% trans %}The following data will be sent back to us:{% endtrans %}
                                <ul>
                                    <li>{% trans %}Server URL{% endtrans %}</li>
                                    <li>{% trans %}Contact person{% endtrans %}</li>
                                    <li>{% trans %}Name of the organisation{% endtrans %}</li>
                                </ul>
                            </div>
                            <div>{% trans %}Please note that <strong>no private information</strong> will ever be sent to the Indico Project and that you can disable it anytime (from "Server Admin", "Services", "Instance Tracking").{% endtrans %}</div>
                    </div>

                    <div class="fields-container">
                        {{ form_rows(form, fields=('enable_tracking', 'contact_name', 'contact_email'), placeholder=True) }}
                    </div>
                </div>
            </div>
        {% call form_footer() %}
            <a id="submit-initial-setup" class="i-button blue-button big-button">
                {% trans %}Finish{% endtrans %}
            </a>
        {% endcall %}
    </div>


{% endblock %}
