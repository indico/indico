{% extends 'forms/base_widget.html' %}
{% from 'forms/_form.html' import form_field %}

{% block html %}
    <div class="datetime-widget">
        <input type="text" name="{{ field.name }}" id="{{ field.id }}-date" class="datepicker">
        <input type="time" name="{{ field.name }}" id="{{ field.id }}-time" class="timepicker">
    </div>
{% endblock %}

{% block javascript %}
    <script>
        (function() {
            'use strict';

            $('#{{ field.id }}-date').datepicker();

            {% if field.earliest_dt %}
                var minDate = moment({{ field.earliest_dt | format_datetime('short') | tojson }}, 'DD/MM/YYYY HH:mm');
                $('#{{ field.id }}-date').datepicker('option', 'minDate', minDate.toDate());
            {% endif %}

            {% if field.latest_dt %}
                var maxDate = moment({{ field.latest_dt | format_datetime('short') | tojson }}, 'DD/MM/YYYY HH:mm');
                $('#{{ field.id }}-date').datepicker('option', 'maxDate', maxDate.toDate());
            {% endif %}
        })();
    </script>
{% endblock %}
