{% if preview %}
    {% extends 'events/management/base.html' %}
{% elif event.type == 'conference' %}
    {% extends 'events/registration/display/_event_registration_base.html' %}
{% else %}
    {% extends 'events/registration/display/_meeting_registration_base.html' %}
{% endif %}

{% from 'message_box.html' import message_box %}

{% block back_button_url -%}
    {%- if preview -%}
        {{ url_for('.manage_regform_list', event) }}
    {%- endif -%}
{%- endblock %}

{% block title %}
    {%- if not preview -%}
        {{- page_title -}}
    {%- else -%}
        {% trans %}Participant List Preview{% endtrans %}
    {%- endif -%}
{% endblock %}

{% block subtitle %}
    {% if num_participants %}
        {%- trans num=num_participants %}1 participant{% pluralize %}{{ num }} participants{% endtrans -%}
    {% endif %}
{% endblock %}

{% block description %}
    {%- if preview == 'guest' -%}
        {% trans -%}
            This preview shows the participant list like an unregistered guest would see it.
        {%- endtrans %}
        <br>
        <a href="{{ url_for('.manage_participant_list_preview', event) }}">
            {%- trans %}Show registered participant view instead.{% endtrans -%}
        </a>
    {% elif preview %}
        {% trans -%}
            This preview shows the participant list like a registered participant would see it.
        {%- endtrans %}
        <br>
        <a href="{{ url_for('.manage_participant_list_preview', event, guest=1) }}">
            {%- trans %}Show unregistered guest view instead.{% endtrans -%}
        </a>
    {%- elif tables|length > 1 -%}
        {% trans -%}
            The lists of participants grouped by the registration form they used to register for the event.
        {%- endtrans %}
    {%- endif -%}
{% endblock %}

{% block content %}
    <div
        id="participant-list-accordion"
        data-tables="{{ tables | tojson | forceescape }}"
        {% if published %}
            data-published="true"
        {% endif %}
        data-total-participant-count="{{ num_participants }}"
    ></div>

    <script>
        $('.registrations .tablesorter').tablesorter({
            cssAsc: 'header-sort-asc',
            cssDesc: 'header-sort-desc',
            headerTemplate: ''
        });

        setupParticipantListAccordion('#participant-list-accordion');
    </script>
{% endblock %}
