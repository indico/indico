{% extends 'events/management/base.html' %}
{% from 'forms/_form.html' import form_header, form_footer, form_row, form_rows, form_fieldset, form_row_static %}

{% block title %}{% trans %}Privacy dashboard{% endtrans %}{% endblock %}

{% block content %}
    {{ form_header(form, id='privacy-dashboard-form') }}
    {% call form_fieldset(_('Data controller')) %}
        {{ form_rows(form, fields=form._data_controller_fields) }}
    {% endcall %}
    {% call form_fieldset(_('Privacy notice')) %}
        {{ form_rows(form, fields=form._privacy_policy_fields) }}
    {% endcall %}
    {% call form_row_static() %}
        <input class="i-button big highlight" type="submit" value="{% trans %}Save{% endtrans %}"
               data-disabled-until-change data-save-reminder>
    {% endcall %}
    {% if regforms %}
        {% call form_fieldset(_('Registration forms')) %}
            {% for regform in regforms %}
                <div class="action-box">
                    <div class="section">
                        <div class="icon icon-quill"></div>
                        <div class="text">
                            <div class="label">{{ regform.title }}</div>
                        </div>
                        <div class="toolbar">
                            <div class="group">
                                {% if regform.publish_registrations_mode.name == 'hide_all' %}
                                    {% trans %}Hiding all registrations.{% endtrans %}
                                {% elif regform.publish_registrations_mode.name == 'show_with_consent' %}
                                    {% trans %}Only showing registrations with user consent.{% endtrans %}
                                {% elif regform.publish_registrations_mode.name == 'show_all' %}
                                    {% trans %}Showing all registrations.{% endtrans %}
                                {% endif %}
                            </div>
                            <div class="group">
                                <a href="{{ url_for('event_registration.edit_regform', regform) }}" class="i-button highlight icon-settings">
                                    {% trans %}Manage privacy{% endtrans %}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% endcall %}
    {% endif %}
    {{ form_footer(form) }}
{% endblock %}
