{% extends 'events/abstracts/management/_base.html' %}

{% from 'events/abstracts/abstract/public.html' import render_abstract_public %}
{% from 'events/abstracts/abstract/judge.html' import render_decision_box %}
{% from 'events/abstracts/abstract/review.html' import render_abstract_reviews, render_abstract_comments %}

{% block content %}
    {{ render_abstract_public(abstract, management=management) }}
    <div id="abstract-private" class="i-timeline">
        <div class="i-timetable-connect-down"></div>
        <div class="i-timeline-separator"></div>
        {{ render_abstract_comments(abstract) }}
        {% if abstract.can_see_reviews(session.user) %}
            {{ render_abstract_reviews(abstract) }}
            <div class="i-timeline-separator"></div>
        {% endif %}

        {% set can_review = abstract.can_review(session.user) %}
        {% set can_judge = abstract.can_judge(session.user, check_state=true) %}

        {% if can_review or can_judge %}
            <div class="i-timetable-connect-up"></div>
        {% endif %}

        {% if can_judge %}
            {{ render_decision_box(abstract, form) }}
        {% endif %}
    </div>
{% endblock %}
